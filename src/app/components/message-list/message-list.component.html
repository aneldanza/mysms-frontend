<!-- <div *ngIf="isLoading" class="text-center text-gray-500">
  Loading messages...
</div>
<div *ngIf="error" class="text-red-500 text-center">{{ error }}</div>

<ul *ngIf="messages.length" class="space-y-4">
  <li *ngFor="let msg of messages" class="border p-4 rounded shadow">
    <div class="text-sm text-gray-500">
      {{ msg.created_at | date : "short" }}
    </div>
    <div class="font-medium">To: {{ msg.to }}</div>
    <div class="text-gray-800">{{ msg.body }}</div>
    <div class="mt-2 text-sm font-semibold">
      Status:
      <span
        [ngClass]="{
          'text-green-600': msg.status === 'delivered',
          'text-yellow-600': msg.status === 'sent' || msg.status === 'sending',
          'text-blue-600': msg.status === 'queued',
          'text-red-600':
            msg.status === 'undelivered' || msg.status === 'failed',
          'text-gray-500': !msg.status
        }"
      >
        {{ msg.status || "pending" }}
      </span>
    </div>
  </li>
</ul>

<div
  *ngIf="!isLoading && messages.length === 0"
  class="text-center text-gray-500"
>
  No messages sent yet.
</div> -->

<div class="bg-white p-4 rounded-lg shadow h-full">
  <h2 class="text-xl font-bold mb-4">
    Message History ({{ messages.length }})
  </h2>

  <div *ngIf="isLoading" class="text-gray-500">Loading messages...</div>
  <div *ngIf="error" class="text-red-500">{{ error }}</div>

  <div class="space-y-4 max-h-[calc(100vh-10rem)] overflow-y-auto pr-2">
    <div *ngFor="let msg of messages" class="border p-3 rounded shadow-sm">
      <div class="flex justify-between items-center text-sm mb-1">
        <div class="font-bold text-green-700 flex items-center gap-1">
          âœ… {{ msg.to }}
        </div>
        <span class="text-gray-500"
          >{{ msg.created_at | date : "fullDate" }}
          {{ msg.created_at | date : "shortTime" }}</span
        >
      </div>
      <div class="text-gray-900 whitespace-pre-line">{{ msg.body }}</div>
      <div class="text-right text-xs text-gray-500 mt-1">
        {{ msg.body?.length || 0 }}/250
      </div>
    </div>
  </div>
</div>
